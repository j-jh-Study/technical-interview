# Transaction

>데이터베이스 Transaction은 데이터베이스 관리 시스템(DBMS)에서 수행되는 작업의 논리적 단위를 말합니다. 데이터베이스에서 데이터를 수정, 삽입, 삭제하는 등의 작업을 수행할 때, 이러한 작업을 하나의 논리적 단위로 묶어서 처리하게 되면, 데이터의 일관성과 무결성을 보장할 수 있습니다.

여기서 트랜잭션의 특징과 키워드는 다음과 같습니다.

1. 원자성(Atomicity): 트랜잭션은 모든 작업이 전부 수행되거나 전혀 수행되지 않아야 합니다. 즉, 트랜잭션이 일부만 실행되어 실패하는 경우, 이전 상태로 롤백(Rollback)되어야 합니다.

2. 일관성(Consistency): 트랜잭션 수행 전과 수행 후에 데이터베이스의 일관성이 유지되어야 합니다. 즉, 트랜잭션 수행 전과 수행 후에 데이터베이스가 일관된 상태가 되어야 합니다.

3. 격리성(Isolation): 트랜잭션은 다른 트랜잭션의 수행 결과에 영향을 받지 않아야 합니다. 즉, 트랜잭션은 독립적으로 수행되어야 하며, 다른 트랜잭션에서 수행하는 작업이나 결과를 볼 수 없습니다.

4. 지속성(Durability): 트랜잭션이 완료된 후에는 영구적으로 반영되어야 합니다. 즉, 시스템이 고장나거나 재시작하더라도 트랜잭션이 완료된 결과는 유지되어야 합니다.

---


트랜잭션의 상태(State): 트랜잭션은 수행 중인 상태(Active), 실행 완료 후 성공한 상태(Committed), 실행 완료 후 실패한 상태(Aborted) 등의 상태를 가집니다.

트랜잭션의 제어(Control): 트랜잭션을 제어하는 방법에는 Locking, Optimistic Control, Timestamping 등이 있습니다. 이러한 제어 방법은 트랜잭션의 격리성을 보장하기 위한 것입니다


---
트랜잭션의 제어(Control)란 트랜잭션이 데이터베이스에서 동시에 수행될 때, 데이터베이스의 일관성과 무결성을 유지하기 위한 방법을 말합니다. 대표적인 트랜잭션 제어 방법으로는 Locking, Optimistic Control, Timestamping 등이 있습니다.

1. Locking
Locking은 트랜잭션이 데이터를 변경할 때, 해당 데이터를 락(Lock)으로 잠그는 방법입니다. 즉, 데이터를 변경하는 동안에는 다른 트랜잭션에서 해당 데이터를 접근할 수 없게 됩니다. 이 방법은 격리성(Isolation)을 보장하기 위한 방법입니다.

- 락을 언제까지 유지할지에 따라서 세분화된 방법이 있습니다. 공유 락(Shared Lock)과 배타적 락(Exclusive Lock)이 대표적입니다.
  - 공유 락(Shared Lock): 여러 트랜잭션이 데이터를 읽을 수 있지만, 데이터를 수정할 수 없습니다. 즉, 공유 락이 유지되는 동안에는 데이터를 변경할 수 없습니다.  
  - 배타적 락(Exclusive Lock): 트랜잭션이 데이터를 읽거나 수정할 수 있지만, 다른 트랜잭션이 데이터에 접근할 수 없습니다. 즉, 배타적 락이 유지되는 동안에는 데이터를 읽거나 수정할 수 있지만, 다른 트랜잭션에서는 해당 데이터에 접근할 수 없습니다.
  
2. Optimistic Control
Optimistic Control은 락을 사용하지 않고, 트랜잭션이 데이터를 읽거나 수정하는 순간까지는 다른 트랜잭션에서 해당 데이터를 변경할 수 있도록 하는 방법입니다. 트랜잭션이 실행될 때, 데이터의 버전을 기록하고, 트랜잭션이 데이터를 수정할 때마다 버전을 업데이트합니다. 이 방법은 대부분의 경우에는 락을 사용하는 방법보다 빠르지만, 데이터 충돌이 발생할 가능성이 있습니다.

3. Timestamping
Timestamping은 각 트랜잭션에 고유한 시간 값을 할당하고, 시간 값을 기반으로 트랜잭션의 수행 순서를 결정하는 방법입니다. 각 트랜잭션이 실행될 때, 해당 트랜잭션에 대한 타임스탬프 값을 생성하고, 데이터베이스에서 해당 트랜잭션의 수행 순서를 결정합니다. 이 방법은 트랜잭션 충돌이 발생하는 경우, 충돌이 발생한 트랜잭션 중 하나를 롤백하면서 일관성을 유지하는 방식으로 처리됩니다.

트랜잭션 제어 방법을 선택할 때는 데이터베이스 시스템의 특성과 사용자 요구사항에 따라 적절한 방법을 선택해야 합니다. 락을 사용하는 방법은 복잡하지만, 데이터 충돌이 발생할 가능성이 적습니다. Optimistic Control은 락을 사용하지 않아서 처리 속도가 빠르지만, 데이터 충돌이 발생할 가능성이 있습니다. Timestamping은 락을 사용하지 않으며, 처리 속도도 빠르지만, 데이터 충돌이 발생할 가능성이 있습니다. 이러한 방법들을 조합하여 트랜잭션 제어 방법을 선택하는 것이 좋습니다.
